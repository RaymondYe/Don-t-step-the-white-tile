"use strict";void function(a){function b(a){return Math.floor(Math.random()*a)}function c(a){return document.getElementById(a)}function d(){for(var a="",b=0;b<m.total/m.cols;b++)a+=e();return a}function e(){var a="<li><ul>",c=b(20),d=b(m.cols);m.height=m.width/4;for(var e=0;e<m.cols;e++)a+=d==e?0==c?'<li style="height:'+m.height+'px"><img src="img/ball-2.png" alt="Ball"  data-ball="0"/></li>':'<li style="height:'+m.height+'px"><img src="img/ball-1.png" alt="Ball"  data-ball="0"/></li>':'<li style="height:'+m.height+'px"></li>';return a+="</ul></li>"}function f(a){a.getElementsByTagName("li");a.innerHTML=d(),c("wall").style.height=m.width+"px",g()}function g(){l.Time.innerHTML=l.timer+"'00''"}function h(){this.timer.last=Date.now();var a=1e3*l.timer-(this.timer.last-this.timer.start);if(this.running)if(a>0){var b=Math.floor(a/1e3),c=(a/10).toFixed(0).toString().substr(-2,2);l.Time.innerHTML=b+"'"+c+"''",i()}else clearInterval(l.sTime),this.stop()}function i(){c("score").innerHTML="&#215;"+n}function j(a,b){$("#game").css({webkitTransition:"0ms",webkitTransform:"translate3d(0,-"+m.height+"px,0)"}).prepend(a),setTimeout(function(){b()},0)}function k(){c.ajax({url:"./server/controller.php",type:"post",dataType:"json",data:{param1:"value1"}}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}var l={timer:30,Time:c("time"),sTime:"",moveSpeed:300,fsnStop:2e3},m={total:16,cols:4,width:640,height:0},n=0,o=0;window.localStorage&&(o=localStorage.getItem("fsnBest")||0);var p=function(){$("#game").css({webkitTransition:l.moveSpeed+"ms",webkitTransform:"translate3d(0,-0px,0)"})};a.ball=new Best.Game({onInit:function(a){var b=this;this.id=a,m.width=this.id.offsetWidth,f(a),i(),c("start").addEventListener("touchstart",function(){c("review").className="flipOutX animated",c("review").style.display="none",b.start()},!1)},onStart:function(){c("start").style.display="none",this.id.className="game",this.initEvent(),this.timer.start=Date.now(),this.onRun()},initEvent:function(){var a=this,b=this.id.getElementsByTagName("ul");b[b.length-1].getElementsByTagName("img")[0].attributes["data-ball"].value=1,a.fristBall=!0,this.id.addEventListener("touchstart",function(b){var c=b.target;if(c.attributes["data-ball"]&&ball.running&&!ball.paused&&1==c.attributes["data-ball"].value){var d=c.src.substr(-5,1);if(1==d&&(c.className="animated shake",c.src="img/ball-3.png"),2==d&&(c.className="animated shake",c.src="img/ball-4.png",a.onPause()),c.attributes["data-ball"].value=0,c.parentNode.parentNode.parentNode.previousSibling.getElementsByTagName("img")[0].attributes["data-ball"].value=1,a.fristBall)a.fristBall=!1;else{var f=e();j(f,p)}n+=1}},!1)},onRun:function(){var a=this;l.sTime=setInterval(function(){h.call(a)},a.timer.step)},onPause:function(){var a=this;$("#big").removeClass("hidden").addClass("animated bounceIn").bind("touchstart",function(){$(this).removeClass("bounceIn").addClass("shake infinite"),n+=1,i()}),this.timer.start+=l.fsnStop;setTimeout(function(){$("#big").addClass("hidden").unbind(),a.onRun()},l.fsnStop);clearInterval(l.sTime)},onResume:function(){this.id.innerHTML="",this.firstBall=!0,this.onInit(c("game")),n=0,this.start()},onStop:function(){var a=this;this.id.className+=" disabled",l.Time.innerHTML="0'00''",c("modalScore").innerHTML=n,$("#myModal").modal("show"),c("resume").addEventListener("touchstart",function(){$("#myModal").modal("hide"),a.resume()},!1),k()}})}(this);